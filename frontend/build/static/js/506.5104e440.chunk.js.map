{"version":3,"file":"static/js/506.5104e440.chunk.js","mappings":"yNAIe,SAASA,IACpB,MCHW,WACX,MAA0BC,EAAAA,SAAe,MAAK,eAAvCC,EAAK,KAAEC,EAAQ,KACtB,EAA8BF,EAAAA,SAAe,MAAK,eAA3CG,EAAO,KAAEC,EAAU,KAEpBC,EAAa,yCAAG,WAAOC,EAAOC,EAAUC,GAAe,8FACpCC,MAAM,GAAD,OACvBC,wBAAyB,+BAAuBJ,GACnD,CACEK,OAAQ,QACRC,KAAMC,KAAKC,UAAU,CACnBP,SAAUA,EACVC,gBAAiBA,IAEnBO,QAAS,CACP,eAAgB,sBAGpB,KAAD,EAZa,OAARC,EAAQ,gBAaKA,EAASC,OAAO,KAAD,EAA5BA,EAAI,OACLD,EAASE,GAEHF,EAASE,KAClBd,EAAWa,EAAKd,SAChBD,EAAS,OAHTA,EAASe,EAAKhB,OAIf,2CACF,gBArBkB,0CAuBrB,MAAO,CAAEI,cAAAA,EAAeJ,MAAAA,EAAOE,QAAAA,EACjC,CDzB8CgB,GAAlCd,EAAa,EAAbA,cAAeJ,EAAK,EAALA,MAAOE,EAAO,EAAPA,QACxBI,EAAWP,EAAAA,SACXQ,EAAkBR,EAAAA,SAElBoB,EAAY,yCAAG,WAAOC,GAAC,8EAGoB,OAF/CA,EAAEC,iBACIC,EAAQC,OAAOC,SAASC,KAAKC,QAAQ,KAAK,EAC1CrB,EAAQkB,OAAOC,SAASC,KAAKE,MAAML,GAAO,EAAD,OACzClB,EAAcC,EAAOC,EAASsB,QAAQC,MAAOtB,EAAgBqB,QAAQC,OAAM,2CAClF,gBALiB,sCAOlB,OACE,gBAAKC,UAAU,mCAAkC,UAC/C,kBAAMA,UAAU,kBAAkBC,SAAUZ,EAAa,WACvD,2BAAO,mBACP,kBACEa,KAAK,WACLC,GAAG,eACH,aAAW,eACXC,IAAK5B,KAEP,2BAAO,2BACP,kBACE0B,KAAK,WACLC,GAAG,uBACH,aAAW,uBACXC,IAAK3B,KAELL,IAAW,4BAAQ,SACpBF,IACC,iBAAKmC,KAAK,QAAQL,UAAU,QAAO,UAChC9B,EAAM,OAIVA,GAASA,EAAMoC,MAAM,cAAe,0BAAG,SAAC,KAAI,CAACC,GAAG,SAAQ,SAAC,YAAc,6BACvEnC,IACC,gBAAKiC,KAAK,QAAQL,UAAU,UAAS,SAClC5B,IAGJA,IACC,wBACE,SAAC,KAAI,CAACmC,GAAG,SAAQ,SAAC,iBAOhC,C","sources":["pages/ResetPassword.js","hooks/useResetPassword.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport useResetPassword from '../hooks/useResetPassword';\n\nexport default function ResetPassword(){\n    const { resetPassword, error, success } = useResetPassword();\n    const password = React.useRef();\n    const confirmPassword = React.useRef();\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      const start = window.location.href.indexOf('=')+1;\n      const token = window.location.href.slice(start);\n      await resetPassword(token, password.current.value, confirmPassword.current.value)\n    }\n\n    return (\n      <div className=\"form--container--reset--password\">\n        <form className=\"reset--password\" onSubmit={handleSubmit}>\n          <label>New password:</label>\n          <input\n            type=\"password\"\n            id=\"new-password\"\n            aria-label=\"new password\"\n            ref={password}\n          />\n          <label>Confirm new password:</label>\n          <input\n            type=\"password\"\n            id=\"confirm-new-password\"\n            aria-label=\"confirm new password\"\n            ref={confirmPassword}\n          />\n          {!success && <button>Save</button>}\n          {error && (\n            <div role=\"alert\" className=\"error\">\n              {error}.\n           \n            </div>\n          )}\n          {error && error.match(/invalid/i) && <p><Link to=\"/login\">Go back</Link> to resend the request.</p>}\n          {success && (\n            <div role=\"alert\" className=\"success\">\n              {success}\n            </div>\n          )}\n          {success && (\n            <p>\n              <Link to=\"/login\">Log in</Link>\n            </p>\n          )}\n        </form>\n      </div>\n    );\n\n}","import React from 'react'\n\nexport default function useResetPassword() {\n    const [error, setError] = React.useState(null);\n    const [success, setSuccess] = React.useState(null);\n\n    const resetPassword = async (token, password, confirmPassword) => {\n      const response = await fetch(\n        `${process.env.REACT_APP_API}/api/reset-password/${token}`,\n        {\n          method: \"PATCH\",\n          body: JSON.stringify({\n            password: password,\n            confirmPassword: confirmPassword,\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      const json = await response.json();\n      if (!response.ok) {\n        setError(json.error);\n      } else if (response.ok) {\n        setSuccess(json.success);\n        setError(null);\n      }\n    };\n\n  return { resetPassword, error, success };\n}\n"],"names":["ResetPassword","React","error","setError","success","setSuccess","resetPassword","token","password","confirmPassword","fetch","process","method","body","JSON","stringify","headers","response","json","ok","useResetPassword","handleSubmit","e","preventDefault","start","window","location","href","indexOf","slice","current","value","className","onSubmit","type","id","ref","role","match","to"],"sourceRoot":""}