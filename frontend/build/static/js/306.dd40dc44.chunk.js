"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[306],{2306:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var n=r(4165),a=r(5861),s=r(9439),l=r(2791),o=r(7200),i=r(4961),u=r(6849);var c=r(184),d=l.lazy((function(){return r.e(273).then(r.bind(r,6273))}));function p(e){var t=e.id,r=e.title,p=e.muscle_group,h=e.reps,f=e.load,m=e.createdAt,g=e.updatedAt,x=e.page,b=e.getItems,j=e.total,v=e.limit,k=e.spreadPages,w=l.useState(!1),Z=(0,s.Z)(w,2),y=Z[0],N=Z[1],S=function(){var e=l.useState(null),t=(0,s.Z)(e,2),r=t[0],o=t[1],c=(0,i.m)().dispatch,d=(0,u.E)().user,p=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return o("You must be logged in to do that"),e.abrupt("return");case 3:return e.next=5,fetch("".concat("http://localhost:6060","/api/workouts/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(d.token)}});case 5:return r=e.sent,e.next=8,r.json();case 8:a=e.sent,r.ok&&(c({type:"DELETE_ONE",payload:a.workout}),o(null)),r.ok||o(a.error);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{deleteWorkout:p,error:r}}(),C=S.deleteWorkout,F=S.error,E=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return e.next=4,b("",x);case 4:k(j,v);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){N((function(e){return!e}))},A=(0,o.Z)(new Date(m),{addSuffix:!0});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{"aria-label":"details of workout ".concat(r," created ").concat(A),className:"workout-details",children:[(0,c.jsx)("h4",{children:r}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"reps:"})," ",h]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"load:"})," ",f]}),(0,c.jsx)("p",{"aria-label":"date",className:"date",children:A}),(0,c.jsx)("button",{"aria-label":"delete workout ".concat(r," created ").concat(A),className:"material-symbols-outlined",onClick:E,children:"delete"}),(0,c.jsx)("button",{"aria-label":"open ".concat(r," edit form created ").concat(A),className:"material-symbols-outlined edit",onClick:_,children:"edit"}),F&&(0,c.jsx)("div",{role:"alert",className:"error",children:F})]}),y&&(0,c.jsx)(l.Suspense,{children:(0,c.jsx)(d,{id:t,title:r,muscle_group:p,reps:h,load:f,createdAt:m,updatedAt:g,showEdit:function(){return _()}},t+"edit")})]})}var h=r(3433),f=function(){var e=(0,i.m)().dispatch,t=(0,u.E)().user,r=l.useState(null),o=(0,s.Z)(r,2),c=o[0],d=o[1],p=function(){var r=(0,a.Z)((0,n.Z)().mark((function r(a){var s,l;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=3;break}return d("You must be logged in"),r.abrupt("return");case 3:return r.next=5,fetch("".concat("http://localhost:6060","/api/workouts"),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}});case 5:return s=r.sent,r.next=8,s.json();case 8:if(l=r.sent,s.ok){r.next=12;break}return d("Please fill out the empty fields"),r.abrupt("return");case 12:s.ok&&(d(null),e({type:"CREATE_WORKOUT",payload:l}));case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return{createWorkout:p,error:c}};function m(e){var t=e.hideForm,r=e.spreadPages,o=e.flipPage,i=e.total,u=e.limit,d=e.getItems,p=f(),m=p.createWorkout,g=p.error,x=l.useRef(),b=l.useRef(),j=l.useRef(),v=l.useRef(),k=l.useState([]),w=(0,s.Z)(k,2),Z=w[0],y=w[1],N=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(a){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),s={title:x.current.value,muscle_group:b.current.value,load:j.current.value,reps:v.current.value},e.next=4,m(s);case 4:if(s.title||y((function(e){return["title"].concat((0,h.Z)(e))})),s.muscle_group||y((function(e){return["muscle group"].concat((0,h.Z)(e))})),s.reps||y((function(e){return["reps"].concat((0,h.Z)(e))})),s.load||y((function(e){return["load"].concat((0,h.Z)(e))})),!(s.title&&s.muscle_group&&s.reps&&s.load)){e.next=15;break}return t(),e.next=12,d("",0);case 12:r(i,u),o(1),y([]);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.jsx)("div",{className:"form--container--workout--form",children:(0,c.jsxs)("form",{className:"workout--form","aria-label":"workout form",onSubmit:N,children:[(0,c.jsx)("button",{"aria-label":"close form",className:"close material-symbols-outlined",onClick:t,children:"close"}),(0,c.jsx)("h4",{children:"New workout"}),(0,c.jsx)("label",{children:"exercise title:"}),(0,c.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"ex: bench press","aria-label":"workout title",ref:x,className:Z.includes("title")?"error":""}),(0,c.jsx)("label",{htmlFor:"muscle_group",children:"muscle group:"}),(0,c.jsxs)("select",{ref:b,"aria-label":"muscle group",name:"muscle_group",id:"muscle_group",className:Z.includes("muscle group")?"error":"",children:[(0,c.jsx)("option",{value:"",children:"-please select-"}),(0,c.jsx)("option",{value:"chest",children:"chest"}),(0,c.jsx)("option",{value:"shoulder",children:"shoulder"}),(0,c.jsx)("option",{value:"biceps",children:"biceps"}),(0,c.jsx)("option",{value:"triceps",children:"triceps"}),(0,c.jsx)("option",{value:"leg",children:"leg"}),(0,c.jsx)("option",{value:"back",children:"back"}),(0,c.jsx)("option",{value:"glute",children:"glute"}),(0,c.jsx)("option",{value:"ab",children:"ab"}),(0,c.jsx)("option",{value:"calf",children:"calf"}),(0,c.jsx)("option",{value:"forearm and grip",children:"forearm and grip"})]}),(0,c.jsx)("label",{children:"number of reps:"}),(0,c.jsx)("input",{type:"number",name:"reps",id:"reps","aria-label":"number of reps",ref:v,className:Z.includes("reps")?"error":""}),(0,c.jsx)("label",{children:"load (kg):"}),(0,c.jsx)("input",{type:"number",name:"load",id:"load","aria-label":"load in kg",ref:j,className:Z.includes("load")?"error":""}),(0,c.jsx)("button",{className:"workout--form--btn","aria-label":"submit workout button",children:"Add workout"}),g&&(0,c.jsx)("div",{role:"alert",className:"error",children:g})]})})}var g=r(6666),x=r.n(g);function b(e){var t=e.page,r=e.limit,n=e.flipPage,a=e.total,s=e.pageSpread;function l(e,t){if(e+1===t)return t-3>1&&s.length-t>1?"num--page current dots-left dots-right":s.length-t>1&&t>2?"num--page current dots-right":t-3>1?"num--page current dots-left":"num--page current";if(e+1!==t){if(t>3&&t!==s.length)return"invisible";if(t===s.length&&t<s.length-1)return"num--page dots-left";if(3===t&&s.length>4&&e+1<3)return"num--page dots-right";if(t<=3||t===s.length)return"num--page"}}return(0,c.jsxs)("div",{"aria-label":"pages",className:"page--btn--container",children:[(0,c.jsx)("button",{"aria-label":"previous page",type:"button",className:"prev--page",disabled:t<=0,onClick:function(){return n(-1)},children:(0,c.jsx)("span",{className:"material-symbols-outlined",children:"chevron_left"})}),s.map((function(e){return(0,c.jsx)("button",{"aria-label":"go to page ".concat(e),className:l(t,e),onClick:function(){return n(e)},children:e},x()())})),(0,c.jsx)("button",{"aria-label":"next page",type:"button",className:"next--page",disabled:(t+1)*r>=a,onClick:function(){return n([1])},children:(0,c.jsx)("span",{className:"material-symbols-outlined",children:"chevron_right"})})]})}var j=function(){var e=l.useState(null),t=(0,s.Z)(e,2),r=t[0],o=t[1],c=(0,u.E)().user,d=(0,i.m)().dispatch,p=l.useState(null),h=(0,s.Z)(p,2),f=h[0],m=h[1],g=l.useState(null),x=(0,s.Z)(g,2),b=x[0],j=x[1],v=l.useState(null),k=(0,s.Z)(v,2),w=k[0],Z=k[1],y=l.useState([]),N=(0,s.Z)(y,2),S=N[0],C=N[1],F=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!0),c){e.next=5;break}return o(!1),Z("Not authorized"),e.abrupt("return");case 5:return e.next=7,fetch("".concat("http://localhost:6060","/api/workouts/?search=").concat(t,"&p=").concat(r),{headers:{Authorization:"Bearer ".concat(c.token)}});case 7:return a=e.sent,e.next=10,a.json();case 10:s=e.sent,a.ok&&(Z(null),o(!1),m(s.limit),j(s.total),C(s.allUserWorkoutsMuscleGroups),d({type:"SET_WORKOUTS",payload:s.workoutsChunk})),a.ok||(o(!1),Z(s.error));case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return{search:F,isLoading:r,limit:f,total:b,allWorkoutsMuscleGroups:S,error:w}};function v(e){var t=e.handleSearch,r=e.query,n=e.isLoading,a=e.handleSearchChange;return(0,c.jsxs)("form",{"aria-label":"search bar",className:n?"search--bar is--loading":"search--bar",onSubmit:t,children:[(0,c.jsx)("input",{"aria-label":"search input",type:"search",placeholder:"search workouts...",value:r,onChange:a,disabled:n}),(0,c.jsx)("button",{"aria-label":"search button",disabled:n,children:(0,c.jsx)("span",{className:"material-symbols-outlined",children:"search"})})]})}var k=r(7769),w=r(152),Z=r(3077),y=function(e){var t=e.labels,r=e.colors,n=e.percentage;return(0,c.jsx)("ul",{className:"custom--legend","aria-label":"chart legend",children:t.map((function(e,t){return(0,c.jsxs)("li",{className:n[t]>0?"muscle--group":"muscle--group zero--percent","aria-label":"".concat(n[t],"% ").concat(e," workouts"),children:[(0,c.jsx)("span",{style:{backgroundColor:r[t]}}),e]},e+t)}))})};w.kL.register(w.qi,w.u);var N=function(e){var t=e.muscleGroups,r=(0,l.useState)(null),n=(0,s.Z)(r,2),a=n[0],o=n[1],i=(0,l.useState)(null),u=(0,s.Z)(i,2),d=u[0],p=u[1],h=(0,l.useState)(null),f=(0,s.Z)(h,2),m=f[0],g=f[1],x=(0,l.useState)(null),b=(0,s.Z)(x,2),j=b[0],v=b[1],k=(0,l.useState)(null),N=(0,s.Z)(k,2),S=N[0],C=N[1],F=(0,l.useState)(null),E=(0,s.Z)(F,2),_=E[0],A=E[1],P=(0,l.useState)(null),W=(0,s.Z)(P,2),T=W[0],z=W[1],L=(0,l.useState)(null),R=(0,s.Z)(L,2),B=R[0],G=R[1],O=(0,l.useState)(null),I=(0,s.Z)(O,2),D=I[0],M=I[1],U=(0,l.useState)(null),q=(0,s.Z)(U,2),K=q[0],Y=q[1];(0,l.useEffect)((function(){return H(t)}),[t]);var H=function(e){var t=e,r=t.length,n=100*t.filter((function(e){return"chest"===e})).length/r;o(n.toFixed(1));var a=100*t.filter((function(e){return"shoulder"===e})).length/r;p(a.toFixed(1));var s=100*t.filter((function(e){return"biceps"===e})).length/r;g(s.toFixed(1));var l=100*t.filter((function(e){return"triceps"===e})).length/r;v(l.toFixed(1));var i=100*t.filter((function(e){return"leg"===e})).length/r;C(i.toFixed(1));var u=100*t.filter((function(e){return"back"===e})).length/r;A(u.toFixed(1));var c=100*t.filter((function(e){return"glute"===e})).length/r;z(c.toFixed(1));var d=100*t.filter((function(e){return"ab"===e})).length/r;G(d.toFixed(1));var h=100*t.filter((function(e){return"calf"===e})).length/r;M(h.toFixed(1));var f=100*t.filter((function(e){return"forearm and grip"===e})).length/r;Y(f.toFixed(1))},J={labels:["Chest","Shoulder","Biceps","Triceps","Leg","Back","Glute","Ab","Calf","Forearm and Grip"],datasets:[{data:[a,d,m,j,S,_,T,B,D,K],backgroundColor:["rgb(219, 162, 215, 0.7)","rgb(212, 122, 147, 0.7)","rgb(162, 122, 212, 0.7)","rgb(122, 131, 212, 0.7)","rgb(99, 148, 255, 0.7)","rgb(99, 224, 255, 0.7)","rgb(99, 255, 239, 0.7)","rgb(99, 255, 140, 0.7)","rgb(255, 206, 99, 0.7)","rgb(255, 127, 99, 0.7)"],borderWidth:1,borderColor:"rgb(255, 255, 255, 0.001)"}]};w.u.positioners.myCustomPositioner=function(){return window.innerWidth<=450?{x:80,y:100}:{x:100,y:150}};return(0,c.jsxs)("div",{className:"chart--container",children:[(0,c.jsx)("h3",{children:"Routine balance (%)"}),(0,c.jsxs)("div",{className:"chart","aria-label":"routine balance chart",children:[(0,c.jsx)(Z.$I,{data:J,options:{onHover:function(e,t){e.native.target.style.cursor=t.length?"pointer":"default"},plugins:{legend:!1,tooltip:{position:"myCustomPositioner",displayColors:!1,backgroundColor:"rgb(255, 255, 255, 0.7)",titleColor:"rgb(112, 98, 109)",bodyColor:"rgb(48, 48, 48)",titleFont:{family:"Poppins",weight:600,size:14},bodyFont:{family:"Poppins",weight:600,size:14}}}}}),(0,c.jsx)(y,{labels:J.labels,colors:J.datasets[0].backgroundColor,percentage:J.datasets[0].data})]})]})},S=function(){return(0,c.jsxs)("div",{className:"chart--placeholder",children:[(0,c.jsx)("p",{className:"chart--placeholder--title"}),(0,c.jsx)("div",{className:"chart--placeholder--circle"}),(0,c.jsxs)("div",{className:"chart--placeholder--legend",children:[(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{}),(0,c.jsx)("span",{})]})]})},C=function(){return(0,c.jsxs)("div",{className:"workouts--placeholder",children:[(0,c.jsx)("div",{children:"Fetching data..."}),(0,c.jsx)("div",{children:"Fetching data..."}),(0,c.jsx)("div",{children:"Fetching data..."})]})};function F(){var e=l.useState(!1),t=(0,s.Z)(e,2),r=t[0],o=t[1],u=(0,i.m)().workouts,d=j(),h=d.search,f=d.total,g=d.limit,x=d.allWorkoutsMuscleGroups,w=d.isLoading,Z=d.error,y=l.useState(0),F=(0,s.Z)(y,2),E=F[0],_=F[1],A=l.useState([]),P=(0,s.Z)(A,2),W=P[0],T=P[1],z=l.useState(""),L=(0,s.Z)(z,2),R=L[0],B=L[1];l.useEffect((function(){G(R,E)}),[R,E]),l.useEffect((function(){O(f,g)}),[f,g]);var G=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,r);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(e,t){for(var r=Math.ceil(e/t),n=[],a=1;a<=r;++a)n.push(a);T(n)},I=function(e){_((function(t){return-1===e?t+e:e[0]?t+e[0]:e-1}))},D=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,G(R,E);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=l.useMemo((function(){return x}),[x.length]);return(0,c.jsx)("div",{className:"home--container",onClick:k.s,children:(0,c.jsxs)("div",{className:"home",children:[(0,c.jsx)(v,{handleSearchChange:function(e){B(e.target.value),_(0)},handleSearch:D,query:R,isLoading:w}),Z&&(0,c.jsx)("div",{role:"alert",className:"error",children:Z}),(0,c.jsxs)("div",{"aria-label":"workouts",className:"workouts--container",children:[u?u.map((function(e){return(0,c.jsx)(p,{id:e._id,title:e.title,muscle_group:e.muscle_group,reps:e.reps,load:e.load,createdAt:e.createdAt,updatedAt:e.updatedAt,page:E,getItems:G,spreadPages:O,total:f,limit:g},e._id)})):(0,c.jsx)(C,{}),u&&!u.length&&!w&&(0,c.jsxs)("h4",{className:"get--started",children:[!R&&(0,c.jsxs)(c.Fragment,{children:["Buff it up to get started.",(0,c.jsx)("br",{}),"No pressure ",(0,c.jsx)("span",{children:"\ud83e\udd64"})]}),R&&(0,c.jsxs)(c.Fragment,{children:['No "',R,'" workouts found.']})]})]}),u?(0,c.jsx)(N,{muscleGroups:M}):(0,c.jsx)(S,{}),!r&&(0,c.jsx)("button",{"aria-label":"buff it up",className:u&&u.length||R?"add--workout":w?"add--workout is--loading":"add--workout no--workouts--yet",onClick:function(){return o(!0)},disabled:w,children:"+ Buff It Up"}),u&&u.length>0&&(0,c.jsx)(b,{page:E,pageSpread:W,total:f,limit:g,flipPage:I}),r&&(0,c.jsx)(m,{hideForm:function(){o(!1)},getItems:G,spreadPages:O,flipPage:I,total:f,limit:g}),(0,c.jsx)("div",{className:"space"})]})})}}}]);
//# sourceMappingURL=306.dd40dc44.chunk.js.map