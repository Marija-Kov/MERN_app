{"version":3,"file":"static/js/506.b7f5df52.chunk.js","mappings":"yNAIe,SAASA,IACpB,MCHW,WACX,MAA0BC,EAAAA,SAAe,MAAK,eAAvCC,EAAK,KAAEC,EAAQ,KACtB,EAA8BF,EAAAA,SAAe,MAAK,eAA3CG,EAAO,KAAEC,EAAU,KAEpBC,EAAa,yCAAG,WAAOC,EAAOC,EAAUC,GAAe,8FACpCC,MAAM,GAAD,OACvBC,wBAAyB,+BAAuBJ,GACnD,CACEK,OAAQ,QACRC,KAAMC,KAAKC,UAAU,CACnBP,SAAUA,EACVC,gBAAiBA,IAEnBO,QAAS,CACP,eAAgB,sBAGpB,KAAD,EAZa,OAARC,EAAQ,gBAaKA,EAASC,OAAO,KAAD,EAA5BA,EAAI,OACLD,EAASE,GAEHF,EAASE,KAClBd,EAAWa,EAAKd,SAChBD,EAAS,OAHTA,EAASe,EAAKhB,OAIf,2CACF,gBArBkB,0CAuBrB,MAAO,CAAEI,cAAAA,EAAeJ,MAAAA,EAAOE,QAAAA,EACjC,CDzB8CgB,GAAlCd,EAAa,EAAbA,cAAeJ,EAAK,EAALA,MAAOE,EAAO,EAAPA,QAC9B,EAAgCH,EAAAA,SAAe,IAAG,eAA3CO,EAAQ,KAAEa,EAAW,KAC5B,EAA8CpB,EAAAA,SAAe,IAAG,eAAzDQ,EAAe,KAAEa,EAAkB,KAC1C,EAA0BrB,EAAAA,SAAe,MAAK,eAAvCM,EAAK,KAAEgB,EAAQ,KAEtBtB,EAAAA,WAAgB,WACd,IAAMuB,EAAQC,OAAOC,SAASC,KAAKC,QAAQ,KAAK,EAChDL,EAASE,OAAOC,SAASC,KAAKE,MAAML,GACtC,GAAG,IAEH,IAAMM,EAAY,yCAAG,WAAOC,GAAC,sEACR,OAAnBA,EAAEC,iBAAiB,SACb1B,EAAcC,EAAOC,EAAUC,GAAgB,2CACtD,gBAHiB,sCAIlB,OACE,gBAAKwB,UAAU,kBAAiB,UAC9B,kBAAMA,UAAU,kBAAkBC,SAAUJ,EAAa,WACvD,2BAAO,mBACP,kBACEK,KAAK,WACLC,GAAG,eACH,aAAW,eACXC,MAAO7B,EACP8B,SAAU,SAACP,GAAC,OAAKV,EAAYU,EAAEQ,OAAOF,MAAM,KAE9C,2BAAO,2BACP,kBACEF,KAAK,WACLC,GAAG,uBACH,aAAW,uBACXC,MAAO5B,EACP6B,SAAU,SAACP,GAAC,OAAKT,EAAmBS,EAAEQ,OAAOF,MAAM,KAEnDjC,IAAW,4BAAQ,SACpBF,IACC,iBAAKsC,KAAK,QAAQP,UAAU,QAAO,UAChC/B,EAAM,IACRA,EAAMuC,MAAM,cAAe,0BAAG,SAAC,KAAI,CAACC,GAAG,SAAQ,SAAC,YAAc,gCAGhEtC,IACC,gBAAKoC,KAAK,QAAQP,UAAU,UAAS,SAClC7B,IAGJA,IACC,wBACE,SAAC,KAAI,CAACsC,GAAG,SAAQ,SAAC,iBAOhC,C","sources":["pages/ResetPassword.js","hooks/useResetPassword.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport useResetPassword from '../hooks/useResetPassword';\n\nexport default function ResetPassword(){\n    const { resetPassword, error, success } = useResetPassword();\n    const [password, setPassword] = React.useState('');\n    const [confirmPassword, setConfirmPassword] = React.useState('');\n    const [token, setToken] = React.useState(null);\n\n    React.useEffect(()=> {\n      const start = window.location.href.indexOf('=')+1;\n      setToken(window.location.href.slice(start))\n    }, [])\n\n    const handleSubmit = async (e) => {\n      e.preventDefault();\n      await resetPassword(token, password, confirmPassword)\n    }\n    return (\n      <div className=\"form--container\">\n        <form className=\"reset--password\" onSubmit={handleSubmit}>\n          <label>New password:</label>\n          <input\n            type=\"password\"\n            id=\"new-password\"\n            aria-label=\"new password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <label>Confirm new password:</label>\n          <input\n            type=\"password\"\n            id=\"confirm-new-password\"\n            aria-label=\"confirm new password\"\n            value={confirmPassword}\n            onChange={(e) => setConfirmPassword(e.target.value)}\n          />\n          {!success && <button>Save</button>}\n          {error && (\n            <div role=\"alert\" className=\"error\">\n              {error}.\n            {error.match(/expired/i) && <p><Link to=\"/login\">Go back</Link> to resend the request.</p>}\n            </div>\n          )}\n          {success && (\n            <div role=\"alert\" className=\"success\">\n              {success}\n            </div>\n          )}\n          {success && (\n            <p>\n              <Link to=\"/login\">Log in</Link>\n            </p>\n          )}\n        </form>\n      </div>\n    );\n\n}","import React from 'react'\n\nexport default function useResetPassword() {\n    const [error, setError] = React.useState(null);\n    const [success, setSuccess] = React.useState(null);\n\n    const resetPassword = async (token, password, confirmPassword) => {\n      const response = await fetch(\n        `${process.env.REACT_APP_API}/api/reset-password/${token}`,\n        {\n          method: \"PATCH\",\n          body: JSON.stringify({\n            password: password,\n            confirmPassword: confirmPassword,\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      const json = await response.json();\n      if (!response.ok) {\n        setError(json.error);\n      } else if (response.ok) {\n        setSuccess(json.success);\n        setError(null);\n      }\n    };\n\n  return { resetPassword, error, success };\n}\n"],"names":["ResetPassword","React","error","setError","success","setSuccess","resetPassword","token","password","confirmPassword","fetch","process","method","body","JSON","stringify","headers","response","json","ok","useResetPassword","setPassword","setConfirmPassword","setToken","start","window","location","href","indexOf","slice","handleSubmit","e","preventDefault","className","onSubmit","type","id","value","onChange","target","role","match","to"],"sourceRoot":""}